{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Motivational eBooks Shop - Payment Page">
    <title>Payment page</title>
    <link rel="stylesheet" href="{% static 'css/payment.css' %}">
    <script src="https://kit.fontawesome.com/fda438e364.js" crossorigin="anonymous"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon_io/apple-touch-icon.png' %}">


</head>

<body>

    <!-- Header -->
    <header>
        <div class="container">
            <h1> Shopping</h1>
            <nav>
                <ul>
                    <li><a href="{% url 'event' %}">Events</a></li>
                    <li><a href="{% url 'bookings:index2' %}">Home</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="{% url 'bookings:view_cart' %}">Cart</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Payment Section -->
    <section class="payment-section">
        <div class="container">
            <h2>Payment Information</h2>

            <div class="form-section">
                <!-- Billing Information -->
                <div class="form-column">
                    <h3>Billing Information</h3>
                    <label for="full-name">Full Name</label>
                    <input type="text" id="full-name" name="full-name" required placeholder="Enter your full name">

                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required placeholder="Enter your email address">

                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" required placeholder="Enter your address">

                    <label for="city">City</label>
                    <input type="text" id="city" name="city" required placeholder="Enter your city">

                    <label for="zipcode">ZIP Code</label>
                    <input type="text" id="zipcode" name="zipcode" required placeholder="Enter your ZIP code">
                </div>

                <!-- Payment Method -->
                <div class="form-column">
                    <h3>Payment Method</h3>
                    <label for="credit-card">Credit/Debit Card Number</label>
                    <input type="text" id="credit-card" name="credit-card" required
                        placeholder="Enter your card number">

                    <label for="exp-date">Expiration Date</label>
                    <input type="text" id="exp-date" name="exp-date" required placeholder="MM/YY">

                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" name="cvv" required placeholder="Enter CVV">

                    <div class="payment-methods">
                        <div>
                            <input type="radio" id="visa" name="payment-method" value="visa">
                            <label for="visa">Visa</label>
                            <i class="fa-solid fa-credit-card"></i>
                        </div>
                        <div>
                            <input type="radio" id="mastercard" name="payment-method" value="mastercard">
                            <label for="mastercard">MasterCard</label>
                            <i class="fa-brands fa-cc-mastercard"></i>
                        </div>
                        <div>
                            <input type="radio" id="paypal" name="payment-method" value="paypal">
                            <label for="paypal">PayPal</label>
                            <i class="fa-brands fa-cc-paypal"></i>
                        </div>
                    </div>
                </div>
            </div>
              <!-- Payment Summary -->
    <section class="payment-summary">

        <form method="POST">
            {% csrf_token %}
            <h3 id="product-price">Order Summary</h3>
            <h4>Total: ₹<span id="total">{{ total }}</span></h4>
            <h4><span>Shipping: Free</span></h4>
            <h3>Total: ₹<span id="total">{{ total }}</span></h3>
            <!-- All input fields here -->
            <button type="submit">Complete Payment</button>
        </form>

</section>
    </section>
  


    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 . All rights reserved.</p>
            <p>For inquiries, email us at <a
                    href="mailto:support@motivationalebooks.com">support@Eventhive.com</a></p>
        </div>
    </footer>
    <script>
        // Wait until the DOM content is fully loaded
document.addEventListener('DOMContentLoaded', function () {
    // Function to update the payment summary with the cart total and item total
    function updatePaymentSummary() {
        // Retrieve the cart data from localStorage
        const cartData = JSON.parse(localStorage.getItem('cart') || '[]');

        // Calculate the total payment (sum of all item prices)
        let cartTotal = 0;
        cartData.forEach(item => {
            cartTotal += parseFloat(item.price);  // Add each item's price to the total
        });

        // Store the total in localStorage for future reference
        localStorage.setItem('cartTotal', cartTotal.toFixed(2));

        // Update the payment total elements
        const totalElement = document.getElementById('total');
        const itemsTotalElement = document.getElementById('items-total');
        if (totalElement && itemsTotalElement) {
            totalElement.textContent = `$${cartTotal.toFixed(2)}`;  // Format to two decimal places
            itemsTotalElement.textContent = `$${cartTotal.toFixed(2)}`;
        } else {
            console.error("Payment elements not found.");
        }

        // Create an object to store the relevant data for debugging or further use
        const data = {
            itemTotalText: itemsTotalElement ? itemsTotalElement.textContent : null,
            totalText: totalElement ? totalElement.textContent : null,
            cartData: cartData,
            allScripts: Array.from(document.querySelectorAll('script')).map(script => script.textContent)
        };

        // Log the data object for debugging purposes
        console.log('Payment Summary Data:', data);
    }

    // Call the function to update the payment summary on page load
    updatePaymentSummary();
});
    </script>
</body>

</html>